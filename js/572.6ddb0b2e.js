"use strict";(self["webpackChunkclouddrive"]=self["webpackChunkclouddrive"]||[]).push([[572],{3572:(e,o,t)=>{t.r(o),t.d(o,{default:()=>R});var a=t(9835),i=t(6970);const n=(0,a._)("i",{class:"fa-solid fa-cloud q-mx-xs"},null,-1),l=(0,a.Uk)(" CloudDrive "),r={key:0},s={key:1},u=(0,a.Uk)(" Menu aplikacji ");function d(e,o,t,d,p,m){const c=(0,a.up)("q-btn"),g=(0,a.up)("q-toolbar-title"),f=(0,a.up)("q-toolbar"),w=(0,a.up)("q-header"),h=(0,a.up)("q-item-label"),k=(0,a.up)("EssentialLink"),b=(0,a.up)("q-list"),y=(0,a.up)("q-drawer"),v=(0,a.up)("login-form"),L=(0,a.up)("router-view"),P=(0,a.up)("q-page-container"),q=(0,a.up)("q-layout");return(0,a.wg)(),(0,a.j4)(q,{view:"lHh Lpr lFf"},{default:(0,a.w5)((()=>[(0,a.Wm)(w,{bordered:""},{default:(0,a.w5)((()=>[(0,a.Wm)(f,null,{default:(0,a.w5)((()=>[(0,a.Wm)(c,{flat:"",dense:"",round:"",icon:m.getIcon(),"aria-label":"Menu",onClick:m.toggleLeftDrawer},null,8,["icon","onClick"]),(0,a.Wm)(g,null,{default:(0,a.w5)((()=>[n,l])),_:1}),e.currentUser.token?((0,a.wg)(),(0,a.iD)("div",r,[(0,a.Uk)(" Witaj, "+(0,i.zw)(e.currentUser.username)+"! ",1),(0,a.Wm)(c,{flat:"",round:"",icon:"fa-solid fa-arrow-right-from-bracket","aria-label":"Wyloguj się",onClick:m.tryLogout},null,8,["onClick"])])):((0,a.wg)(),(0,a.iD)("div",s,[(0,a.Wm)(c,{flat:"",round:"",icon:"fa-solid fa-arrow-right-to-bracket","aria-label":"Zaloguj się",onClick:m.showLoginPopover},null,8,["onClick"])]))])),_:1})])),_:1}),(0,a.Wm)(y,{modelValue:p.leftDrawerOpen,"onUpdate:modelValue":o[0]||(o[0]=e=>p.leftDrawerOpen=e),"show-if-above":"",bordered:""},{default:(0,a.w5)((()=>[(0,a.Wm)(b,null,{default:(0,a.w5)((()=>[(0,a.Wm)(h,{header:""},{default:(0,a.w5)((()=>[u])),_:1}),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(p.essentialLinks,(e=>((0,a.wg)(),(0,a.j4)(k,(0,a.dG)({key:e.title},e),null,16)))),128))])),_:1})])),_:1},8,["modelValue"]),(0,a.Wm)(P,null,{default:(0,a.w5)((()=>[p.isLoginPopoverVisible?((0,a.wg)(),(0,a.j4)(v,{key:0,isLoginPopoverVisibleProp:p.isLoginPopoverVisible,onClosePopover:m.hideLoginPopover},null,8,["isLoginPopoverVisibleProp","onClosePopover"])):(0,a.kq)("",!0),(0,a.Wm)(L)])),_:1})])),_:1})}function p(e,o,t,n,l,r){const s=(0,a.up)("q-icon"),u=(0,a.up)("q-item-section"),d=(0,a.up)("q-item-label"),p=(0,a.up)("q-item"),m=(0,a.up)("q-separator");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(p,{clickable:"",tag:"a",target:e.isTargetBlank?"_blank":"",href:e.getLink()},{default:(0,a.w5)((()=>[e.icon?((0,a.wg)(),(0,a.j4)(u,{key:0,avatar:""},{default:(0,a.w5)((()=>[(0,a.Wm)(s,{name:e.icon},null,8,["name"])])),_:1})):(0,a.kq)("",!0),(0,a.Wm)(u,null,{default:(0,a.w5)((()=>[(0,a.Wm)(d,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(e.title),1)])),_:1}),(0,a.Wm)(d,{caption:""},{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(e.caption),1)])),_:1})])),_:1})])),_:1},8,["target","href"]),e.separator?((0,a.wg)(),(0,a.j4)(m,{key:0,inset:"",class:"q-my-md"})):(0,a.kq)("",!0)],64)}const m=(0,a.aZ)({name:"EssentialLink",props:{title:{type:String,required:!0},caption:{type:String,default:""},link:{type:String,default:"#"},internalPathName:{type:String,default:""},icon:{type:String,default:""},isTargetBlank:{type:Boolean,default:!1},separator:{type:Boolean,default:!1}},methods:{getLink(){if(this.internalPathName){let e=this.$router.resolve({name:this.internalPathName});return e.href}return this.link}}});var c=t(1639),g=t(490),f=t(1233),w=t(2857),h=t(3115),k=t(926),b=t(9984),y=t.n(b);const v=(0,c.Z)(m,[["render",p]]),L=v;y()(m,"components",{QItem:g.Z,QItemSection:f.Z,QIcon:w.Z,QItemLabel:h.Z,QSeparator:k.Z});const P=e=>((0,a.dD)("data-v-2b5fb3c7"),e=e(),(0,a.Cn)(),e),q=P((()=>(0,a._)("p",{class:"text-h5 q-mt-lg q-mb-xs"},"Logowanie",-1)));function Z(e,o,t,i,n,l){const r=(0,a.up)("q-input"),s=(0,a.up)("q-space"),u=(0,a.up)("q-btn"),d=(0,a.up)("q-form"),p=(0,a.up)("q-card-section"),m=(0,a.up)("q-card"),c=(0,a.up)("q-dialog");return(0,a.wg)(),(0,a.j4)(c,{modelValue:n.isLoginPopoverVisible,"onUpdate:modelValue":o[2]||(o[2]=e=>n.isLoginPopoverVisible=e),position:"top",onHide:l.closePopover},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{class:"container-login",bordered:""},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{class:"row items-center no-wrap login-popover"},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{class:"q-gutter-md",onSubmit:l.tryLogin},{default:(0,a.w5)((()=>[q,(0,a.Wm)(r,{filled:"",modelValue:e.form.Username,"onUpdate:modelValue":o[0]||(o[0]=o=>e.form.Username=o),label:"Login",hint:"Podaj nazwę użytkownika","lazy-rules":"",color:"secondary",dark:"",rules:[e=>e&&e.length>0||"Login jest wymagany!"]},null,8,["modelValue","rules"]),(0,a.Wm)(r,{filled:"",modelValue:e.form.Password,"onUpdate:modelValue":o[1]||(o[1]=o=>e.form.Password=o),label:"Hasło",hint:"Podaj hasło","lazy-rules":"",color:"secondary",dark:"",type:"password",rules:[e=>e&&e.length>0||"Hasło jest wymagane!"]},null,8,["modelValue","rules"]),(0,a.Wm)(s),(0,a.Wm)(u,{label:"Zaloguj",icon:"fa-solid fa-arrow-right","text-color":"secondary",outline:"",type:"submit"})])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue","onHide"])}var V=t(2881),W=t(2502),_=t(7604);const Q={name:"LoginForm",props:{isLoginPopoverVisibleProp:{type:Boolean,default:!1}},data(){return{isLoginPopoverVisible:!1}},computed:{...(0,W.Ah)(V.O,["form","signalrConnection"]),...(0,W.rn)(V.O,["currentUser"])},methods:{...(0,W.nv)(V.O,["clearForm","login"]),closePopover(){this.isLoginPopoverVisible=!1,this.clearForm(),this.$emit("closePopover")},async tryLogin(){await this.login();let e=(0,_.M)(this.currentUser.username,this.$q);this.signalrConnection=e,this.closePopover(),this.$q.notify({type:"info",message:"Zalogowano pomyślnie"})}},mounted(){this.isLoginPopoverVisible=this.isLoginPopoverVisibleProp},beforeUnmount(){this.closePopover()}};var j=t(2074),D=t(4458),C=t(3190),U=t(8326),z=t(6611),S=t(136),O=t(9379);const B=(0,c.Z)(Q,[["render",Z],["__scopeId","data-v-2b5fb3c7"]]),H=B;y()(Q,"components",{QDialog:j.Z,QCard:D.Z,QCardSection:C.Z,QForm:U.Z,QInput:z.Z,QSpace:S.Z,QBtn:O.Z});const I=[{title:"Strona główna",caption:"Przejdź na stronę główną",icon:"fa-solid fa-house",internalPathName:"home",isTargetBlank:!1},{title:"Mój dysk",caption:"Sprawdź zawartość swojego dysku",icon:"fa-solid fa-hard-drive",internalPathName:"drive",isTargetBlank:!1},{title:"Dodaj plik",caption:"Dodaj nową zawartość do dysku",icon:"fa-solid fa-file-arrow-up",internalPathName:"upload",isTargetBlank:!1,separator:!0},{title:"Repozytorium",caption:"Repozytorium na platformie GitHub",icon:"fa-brands fa-github",link:"https://github.com/danielbednarz/CloudDrive",isTargetBlank:!0}],T={name:"MainLayout",components:{EssentialLink:L,LoginForm:H},data(){return{leftDrawerOpen:!0,rightDrawerOpen:!1,essentialLinks:I,isLoginPopoverVisible:!1}},computed:{...(0,W.Ah)(V.O,["currentUser"])},methods:{...(0,W.nv)(V.O,["logout"]),toggleLeftDrawer(){this.leftDrawerOpen=!this.leftDrawerOpen},getIcon(){return this.leftDrawerOpen?"fa-solid fa-square-caret-left":"fa-solid fa-ellipsis"},showLoginPopover(){this.isLoginPopoverVisible=!0},hideLoginPopover(){this.isLoginPopoverVisible=!1},onFileAdded({id:e,fileName:o}){this.$q.notify({type:"info",message:`Z innego urządzenia został dodany nowy plik ${o}`})},tryLogout(){this.logout(),this.$q.notify({type:"info",message:"Wylogowano pomyślnie"}),this.$router.push({name:"home"})}}};var $=t(7605),F=t(6602),N=t(1663),x=t(1973),M=t(906),A=t(3246),E=t(2133);const G=(0,c.Z)(T,[["render",d]]),R=G;y()(T,"components",{QLayout:$.Z,QHeader:F.Z,QToolbar:N.Z,QBtn:O.Z,QToolbarTitle:x.Z,QDrawer:M.Z,QList:A.Z,QItemLabel:h.Z,QPageContainer:E.Z})}}]);