"use strict";(self["webpackChunkclouddrive"]=self["webpackChunkclouddrive"]||[]).push([[775],{2638:(e,r,t)=>{t.d(r,{X:()=>s});t(702),t(4641),t(3269);var o=t(2502),a=t(1569),n=t(2881);const i=(0,n.O)(),s=(0,o.Q_)({id:"directory",state:()=>({form:{Name:"",ParentDirectoryId:null}}),actions:{async addDirectory(){await a.api.post("/File/addDirectory",this.form,{headers:{Authorization:`Bearer ${i.currentUser.token}`}})},clearForm(){this.form.Name="",this.form.ParentDirectoryId=null},getDirectoriesToSelectList(){if(i.currentUser&&i.currentUser.token)return new Promise((e=>{a.api.get("/File/getDirectoriesToSelectList",{headers:{Authorization:`Bearer ${i.currentUser.token}`}}).then((r=>{e(r.data)}))}))},getUserDriveDataToTreeView(){if(i.currentUser&&i.currentUser.token)return new Promise((e=>{a.api.get("/File/getUserDriveDataToTreeView",{headers:{Authorization:`Bearer ${i.currentUser.token}`}}).then((r=>{e(r.data)}))}))},async downloadDirectory({id:e,name:r}){i.currentUser&&i.currentUser.token&&await a.api.get("/File/downloadDirectory",{responseType:"blob",headers:{Authorization:`Bearer ${i.currentUser.token}`},params:{directoryId:e}}).then((e=>{const t=new Blob([e.data],{type:e.data.type}),o=document.createElement("a");o.href=URL.createObjectURL(t),o.download=r,o.click(),URL.revokeObjectURL(o.href)}))}}})},4487:(e,r,t)=>{t.d(r,{Z:()=>v});var o=t(9835),a=t(6970);const n={class:"q-pa-xl main-cont"},i={class:"rounded-borders bg-primary text-white text-center shadow-10 q-pa-xl"},s={class:"row"},l={class:"text-h3 full-width text-center q-mt-xl"};function c(e,r,t,c,d,u){const p=(0,o.up)("q-separator");return(0,o.wg)(),(0,o.iD)("div",n,[(0,o._)("div",i,[(0,o._)("div",s,[(0,o._)("p",l,(0,a.zw)(t.title),1)]),(0,o.Wm)(p,{class:"q-mb-xl q-mt-sm"}),(0,o.WI)(e.$slots,"default",{},void 0,!0)])])}const d={name:"MainContainer",props:{title:{type:String,required:!1,default:""}}};var u=t(1639),p=t(926),m=t(9984),f=t.n(m);const h=(0,u.Z)(d,[["render",c],["__scopeId","data-v-78c84cd8"]]),v=h;f()(d,"components",{QSeparator:p.Z})},2775:(e,r,t)=>{t.r(r),t.d(r,{default:()=>T});var o=t(9835),a=t(1957);function n(e,r,t,n,i,s){const l=(0,o.up)("FileUploader"),c=(0,o.up)("main-container"),d=(0,o.up)("q-page");return(0,o.wg)(),(0,o.j4)(a.uT,{appear:"","enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut"},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{class:"flex justify-center"},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{title:"Dodaj plik"},{default:(0,o.w5)((()=>[(0,o.Wm)(l)])),_:1})])),_:1})])),_:1})}const i={key:0,class:"justify-center"},s={class:"row q-py-lg"},l={class:"column form-field"},c={class:"row"};function d(e,r,t,a,n,d){const u=(0,o.up)("q-select"),p=(0,o.up)("q-uploader");return e.currentUser?((0,o.wg)(),(0,o.iD)("div",i,[(0,o._)("div",s,[(0,o._)("div",l,[(0,o.Wm)(u,{filled:"",modelValue:n.ChosenDirectory,"onUpdate:modelValue":r[0]||(r[0]=e=>n.ChosenDirectory=e),label:"Folder",color:"secondary",dark:"",options:n.directories,"option-label":"text","option-value":"value","emit-value":"","map-options":"",dense:"",clearable:""},null,8,["modelValue","options"])])]),(0,o._)("div",c,[(0,o.Wm)(p,{url:"https://localhost:44390/api/File/uploadFile",color:"secondary","text-color":"dark",square:"",flat:"",bordered:"",multiple:"",class:"uploader q-mt-lg",onRemoved:e.clearForm,onUploading:d.onUploading,onFailed:d.onError,headers:[{name:"Authorization",value:`Bearer ${e.currentUser.token}`}],"form-fields":[{name:"DirectoryId",value:n.ChosenDirectory}]},null,8,["onRemoved","onUploading","onFailed","headers","form-fields"])])])):(0,o.kq)("",!0)}var u=t(2502);const p=(0,u.Q_)({id:"upload",state:()=>({files:[]}),actions:{clearForm(){this.files=[]}}});var m=t(2881),f=t(2638),h=t(9302);const v={name:"UploadPage",data(){return{directories:[],ChosenDirectory:"",$q:(0,h.Z)()}},computed:{...(0,u.rn)(m.O,["currentUser"])},methods:{...(0,u.nv)(p,["uploadFile","clearForm"]),...(0,u.nv)(f.X,["getDirectoriesToSelectList"]),onUploading(){this.$q.notify({type:"info",spinner:!0,message:"Dodaję plik...",timeout:2e3})},onError(){this.$q.notify({type:"negative",message:"Wystąpił błąd podczas dodawania pliku!"})}},mounted(){this.getDirectoriesToSelectList().then((e=>{this.directories=e}))},beforeUnmount(){this.clearForm(),this.files=[]}};var y=t(1639),U=t(4055),g=t(7534),w=t(9984),D=t.n(w);const k=(0,y.Z)(v,[["render",d],["__scopeId","data-v-7bb5f44c"]]),b=k;D()(v,"components",{QSelect:U.Z,QUploader:g.Z});var q=t(4487);const F={name:"UploadPage",components:{FileUploader:b,MainContainer:q.Z}};var _=t(9885);const x=(0,y.Z)(F,[["render",n]]),T=x;D()(F,"components",{QPage:_.Z})}}]);